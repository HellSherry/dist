import{_ as T,u as F,b as h,H as L,s as u,e as l,o as v,c as x,f as o,w as n,a as y,n as A,k as E,M as c,F as G,r as H,i as J,g as i,t as b,G as O}from"./index-1858008c.js";const Q={style:{position:"relative",height:"102vh"}},W={style:{display:"inline-block",float:"right",width:"200px","margin-left":"10px"}},X={__name:"CourseMsgView",setup(Y){const K=F(),w=h(),p=h({records:[{id:1,title:"这是一条通知",details:"这是通知详情",addtime:"2024-01-10T11:15:42.000+00:00"}],total:1,size:10,current:1,pages:1}),e=L({isUpdate:!1,selectedRowKeys:[],visible:!1,page:1,search:"",pojo:{name:"",coursedescription:"",speciaid:1}}),m=h([]);u.get("/specia/getAll").then(s=>{m.value=s.data});function r(){u.get(`/questionCourse/selectLimit?page=${e.page}&search=${e.search}`).then(s=>{p.value=s.data,console.log(s)})}r();async function U(){typeof await w.value.validate()=="boolean"&&u.post(`/questionCourse/${e.isUpdate?"update":"insert"}`,e.pojo).then(s=>{r(),s.data>0?c.success((e.isUpdate?"修改":"新增")+"成功"):c.error((e.isUpdate?"修改":"新增")+"失败"),e.visible=!1})}function j(){if(e.selectedRowKeys.length>0){const s=O({header:"提示",body:"您确认删除所选 "+e.selectedRowKeys.length+" 项数据吗？",confirmBtn:{content:"删除",theme:"danger"},cancelBtn:{content:"取消",variant:"outline"},onConfirm:({e:t})=>{k(e.selectedRowKeys),s.hide()}})}else c.error("请选择要删除的项")}function k(s){u.post("/questionCourse/deletes?ids="+s.toString()).then(t=>{console.log(t),r(),t.data>0?c.success("删除成功"):c.error("删除失败")})}function z(s){let t=m.value.find(d=>d.id===s);if(t!=null)return t.name}return(s,t)=>{const d=l("t-input"),_=l("t-form-item"),$=l("t-radio"),M=l("t-radio-group"),B=l("t-form"),S=l("t-dialog"),f=l("t-icon"),V=l("t-button"),R=l("t-tag"),D=l("t-space"),q=l("t-pagination"),C=l("t-link"),I=l("t-popconfirm"),N=l("t-table"),P=l("t-card");return v(),x("div",Q,[o(S,{placement:"center",header:e.isUpdate?"编辑课程信息":"新增课程",visible:e.visible,"on-confirm":()=>U(),"on-close":()=>e.visible=!1},{default:n(()=>[o(B,{layout:"inline",ref_key:"form",ref:w,rules:{name:[{required:!0,message:"课程名称不能为空"}],speciaid:[{required:!0,message:"专业不能为空"}]},data:e.pojo,colon:!0},{default:n(()=>[o(_,{style:{width:"96%",margin:"8px 0"},label:"课程名称",name:"name"},{default:n(()=>[o(d,{modelValue:e.pojo.name,"onUpdate:modelValue":t[0]||(t[0]=a=>e.pojo.name=a),placeholder:"请输入内容"},null,8,["modelValue"])]),_:1}),o(_,{style:{width:"96%",margin:"8px 0"},label:"详情",name:"coursedescription"},{default:n(()=>[o(d,{modelValue:e.pojo.coursedescription,"onUpdate:modelValue":t[1]||(t[1]=a=>e.pojo.coursedescription=a),placeholder:"请输入内容"},null,8,["modelValue"])]),_:1}),o(_,{style:{width:"96%",margin:"8px 0"},label:"专业",name:"speciaid"},{default:n(()=>[o(M,{modelValue:e.pojo.speciaid,"onUpdate:modelValue":t[2]||(t[2]=a=>e.pojo.speciaid=a)},{default:n(()=>[(v(!0),x(G,null,H(m.value,({id:a,name:g})=>(v(),J($,{value:a},{default:n(()=>[i(b(g),1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["data"])]),_:1},8,["header","visible","on-confirm","on-close"]),y("div",{style:A([{"background-position":"center"},`background-image: url('${E(K).darkT?`//pic.sherry.games/assets/image/mobileback/th (${Math.round(Math.random()*30)}).jpg`:`//pic.sherry.games/assets/image/mobileback/th (${Math.round(Math.random()*30)}).jpg`}');background-repeat: no-repeat;background-size: cover;min-height: 46vh ;margin-top: -20px`])},null,4),o(P,{bordered:!1,hoverShadow:"",style:{width:"96%",margin:"0 auto","margin-top":"-30px","min-height":"58vh"}},{default:n(()=>[y("div",null,[o(D,{size:6},{default:n(()=>[o(V,{size:"small",onClick:t[3]||(t[3]=a=>{e.visible=!0,e.isUpdate=!1,s.$refs.form.reset()}),theme:"primary"},{icon:n(()=>[o(f,{name:"add"})]),default:n(()=>[i(" 新建 ")]),_:1}),o(V,{size:"small",onClick:j,theme:"danger"},{icon:n(()=>[o(f,{name:"delete"})]),default:n(()=>[i(" 删除 ")]),_:1}),o(R,{variant:"light-outline",theme:"primary",shape:"round",size:"small"},{default:n(()=>[i(" 共有"+b(p.value.total)+"条记录 ",1)]),_:1})]),_:1}),y("div",W,[o(q,{totalContent:!1,onChange:r,modelValue:e.page,"onUpdate:modelValue":t[4]||(t[4]=a=>e.page=a),theme:"simple",showPageSize:!1,size:"small",total:p.value.total},null,8,["modelValue","total"])]),o(d,{onInput:t[5]||(t[5]=a=>{e.page=1,r()}),modelValue:e.search,"onUpdate:modelValue":t[6]||(t[6]=a=>e.search=a),modelModifiers:{lazy:!0},size:"small",style:{width:"20%",float:"right"},placeholder:"输入内容",clearable:""},{suffixIcon:n(()=>[o(f,{style:{cursor:"pointer"},name:"search"})]),_:1},8,["modelValue"])]),o(N,{size:"small","row-key":"id","selected-row-keys":e.selectedRowKeys,"onUpdate:selectedRowKeys":t[7]||(t[7]=a=>e.selectedRowKeys=a),data:p.value.list,columns:[{colKey:"row-select",type:"multiple",width:60},{colKey:"id",title:"ID"},{colKey:"name",title:"课程名",ellipsis:!0},{colKey:"coursedescription",title:"详情"},{colKey:"speciaid",title:"专业"},{title:"操作",colKey:"operation"}]},{speciaid:n(({row:a})=>[i(b(z(a.speciaid)),1)]),operation:n(({row:a})=>[o(C,{onClick:g=>{e.visible=!0,e.isUpdate=!0,e.pojo={...a}},theme:"primary",hover:"color"},{default:n(()=>[i(" 编辑 ")]),_:2},1032,["onClick"]),i("  "),o(I,{theme:"danger",confirmBtn:{theme:"danger"},onConfirm:g=>k(a.id),cancelBtn:{variant:"outline"},content:"确认删除吗"},{default:n(()=>[o(C,{theme:"danger",hover:"color"},{default:n(()=>[i(" 删除 ")]),_:1})]),_:2},1032,["onConfirm"])]),_:1},8,["selected-row-keys","data"])]),_:1})])}}},ee=T(X,[["__scopeId","data-v-e03d3426"]]);export{ee as default};
