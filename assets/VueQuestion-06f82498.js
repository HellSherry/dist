import{_ as U,a6 as B,l as N,D as j,G as z,e as o,o as i,i as d,w as r,u as H,f as a,g as u,c as y,r as b,t as m,F as v,a as c,n as x,p as D,m as E}from"./index-1858008c.js";import{_ as F}from"./ToHtml-a2ee5490.js";import{A as M}from"./AnswerUI-9765005f.js";import{a as _}from"./axios1-c840b49a.js";/* empty css                                               *//* empty css                                                                 */const Q={components:{AnswerUI:M,ToHtml:F},data(){return{id:this.$route.query.id,user:this.$route.query.user,password:this.$route.query.password,topicList:[],selectedAnswer:[],activeIndex:0}},computed:{questionNum(){return this.selectedAnswer.reduce((e,t)=>e+=t!=""?1:0,0)},...B(H,["loginUser"])},methods:{dayjs:N,tijiao(){let e=[];this.selectedAnswer.forEach((t,h)=>{t.length===0?e.push(0):e.push(t.sort().join(","))}),console.log(e),_.post("/submit",e,{params:{id:this.id,userId:this.loginUser.sub.userId,username:this.loginUser.sub.username}}).then(t=>{console.log(t.data),j.push("/history/"+this.id),this.$router.push({name:"history",query:{name:this.user,password:this.password,id:t.data}}),console.log(t.data)}).catch(t=>{console.error(t)})},toTijiao(){const e=z({header:"提示",body:"您确认交卷吗？",confirmBtn:"提交考卷",cancelBtn:"继续做题",onConfirm:({e:t})=>{console.log("confirm button has been clicked!"),console.log("e: ",t),this.tijiao(),e.hide()},onClose:({e:t,trigger:h})=>{console.log("e: ",t),console.log("trigger: ",h),e.hide()}})},async setquestions(){await _.get("/findByIdTwo",{params:{groupId:this.id}}).then(e=>{console.log(e.data.result),this.topicList=e.data.result,this.topicList.forEach(t=>{this.selectedAnswer.push([])})}).catch(e=>{console.error(e)})},changeView(e){this.activeIndex=e,this.$nextTick(()=>{this.$refs[`tableRef[${e-1}]`][0].scrollIntoView({behavior:"smooth",block:"center"})})}},async created(){await _.get("/findById",{params:{groupId:this.id,userId:this.loginUser.sub.userId}}).then(e=>{console.log(e.data.result),e.data.result[0]==null?this.setquestions():(this.topicList=e.data.result,this.topicList.forEach(t=>{this.selectedAnswer.push([])}))}).catch(e=>{console.error(e)})}},k=e=>(D("data-v-3c8061bc"),e=e(),E(),e),R=k(()=>c("div",null,null,-1)),$=k(()=>c("div",{style:{height:"56px"}},null,-1));function G(e,t,h,J,n,p){const I=o("t-progress"),g=o("t-button"),w=o("t-space"),A=o("t-aside"),V=o("t-check-tag"),L=o("ToHtml"),C=o("AnswerUI"),S=o("t-card"),T=o("t-content"),q=o("t-layout");return i(),d(q,null,{default:r(()=>[a(A,{style:{overflow:"hidden",width:"300px"}},{default:r(()=>[a(I,{size:"large",class:"aline-center",style:{width:"160px",margin:"10% auto 10px auto"},percentage:parseInt(p.questionNum/n.selectedAnswer.length*100),theme:"circle"},{label:r(()=>[]),_:1},8,["percentage"]),a(g,{size:"large",shape:"round",style:{margin:"20px 4%",width:"92%"},onClick:p.toTijiao},{default:r(()=>[u(" 我要交卷 ")]),_:1},8,["onClick"]),a(w,{size:12,style:{"margin-left":"7%","max-height":"50vh",overflow:"auto"},"break-line":""},{default:r(()=>[(i(!0),y(v,null,b(n.selectedAnswer,(l,s)=>(i(),d(g,{style:{"border-radius":"12px"},variant:l!=""?"base":"dashed",theme:"primary",shape:"square",onClick:f=>p.changeView(s+1)},{default:r(()=>[u(m(s+1),1)]),_:2},1032,["variant","onClick"]))),256))]),_:1}),R]),_:1}),a(T,{style:{overflow:"auto",height:"100vh","margin-top":"-56px"}},{default:r(()=>[$,(i(),d(w,{key:0,style:{width:"100%"},direction:"vertical"},{default:r(()=>[(i(!0),y(v,null,b(n.topicList,(l,s)=>(i(),d(S,{key:s,style:{width:"80%",margin:"20px auto","min-width":"100px","max-width":"800px"},bordered:!1,hoverShadow:"",size:"small",theme:"poster2"},{default:r(()=>[c("div",{style:x(n.selectedAnswer[s]==null||n.selectedAnswer[s]==""?"":"background-color: var(--td-brand-color-4);"),class:"subscribe"},[c("div",{style:x("position: absolute;left: 1px;top: 46px;width: 0;height: 0;border-right: 0px solid transparent;border-left: 9px solid transparent;border-top: 9px solid var(--td-brand-color-"+(n.selectedAnswer[s]==null||n.selectedAnswer[s]==""?"8":"5")+");"),class:"sdf"},null,4),u(" Topic "+m((s+1+"").padStart(2,"0")),1)],4),a(V,{style:{float:"right","margin-top":"4px"},checked:!0,"checked-props":{theme:"primary",variant:"outline"}},{default:r(()=>[u(m(l.longestScore),1)]),_:2},1024),a(L,{style:{overflow:"hidden",width:"90%",margin:"0 auto","font-weight":"600"},innerHTML:l.question},null,8,["innerHTML"]),c("table",{ref_for:!0,ref:`tableRef[${s}]`},null,512),a(C,{answerLen:(l.ranswer.length+1)/2,style:{overflow:"hidden",width:"90%",margin:"30px auto"},checkbox:!1,modelValue:n.selectedAnswer[s],"onUpdate:modelValue":f=>n.selectedAnswer[s]=f,options:JSON.parse(l.answers)},null,8,["answerLen","modelValue","onUpdate:modelValue","options"])]),_:2},1024))),128))]),_:1}))]),_:1})]),_:1})}const ee=U(Q,[["render",G],["__scopeId","data-v-3c8061bc"]]);export{ee as default};
