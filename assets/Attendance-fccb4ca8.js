import{_ as S,u as q,b as h,H as I,e as n,o as M,c as A,f as t,w as a,s as f,M as p,a as b,g as i,t as w,k as Y,l as H,G as N}from"./index-1858008c.js";const P={style:{position:"relative",height:"102vh"}},T={style:{display:"inline-block",float:"right",width:"200px","margin-left":"10px"}},E={__name:"Attendance",setup(G){q();const _=h(),u=h({records:[{id:1,title:"这是一条通知",details:"这是通知详情",addtime:"2024-01-10T11:15:42.000+00:00"}],total:1,size:10,current:1,pages:1}),e=I({isUpdate:!1,selectedRowKeys:[],visible:!1,page:1,search:"",pojo:{id:"",stedent:"",classs:"",date:"",time:"",status:"",details:""},options1:[{label:"同意",value:"同意"},{label:"审批中",value:"审批中"},{label:"拒绝",value:"拒绝"}]});function d(){f.get(`/attendance/selectAll?page=${e.page}&size=8&names=${e.search}`).then(s=>{u.value=s.data,console.log(s)})}d();async function V(){typeof await _.value.validate()=="boolean"&&f.post(`/attendance/${e.isUpdate?"update":"insert"}`,e.pojo).then(s=>{console.log(s),d(),s.data>0?p.success((e.isUpdate?"修改":"新增")+"成功"):p.error((e.isUpdate?"修改":"新增")+"失败"),e.pojo.id="",e.visible=!1})}function k(){if(e.selectedRowKeys.length>0){const s=N({header:"提示",body:"您确认删除所选 "+e.selectedRowKeys.length+" 项数据吗？",confirmBtn:{content:"删除",theme:"danger"},cancelBtn:{content:"取消",variant:"outline"},onConfirm:({e:o})=>{g(e.selectedRowKeys),s.hide()}})}else p.error("请选择要删除的项")}function g(s){f.post("/attendance/delete?ids="+s.toString()).then(o=>{console.log(o),d(),o.data>0?p.success("删除成功"):p.error("删除失败")})}return(s,o)=>{const r=n("t-input"),m=n("t-form-item"),j=n("t-date-picker"),x=n("t-form"),K=n("t-dialog"),c=n("t-icon"),y=n("t-button"),U=n("t-tag"),C=n("t-space"),z=n("t-pagination"),v=n("t-link"),B=n("t-popconfirm"),D=n("t-table"),$=n("t-card");return M(),A("div",P,[t(K,{placement:"center",header:e.isUpdate?"编辑考勤信息":"新增考勤",visible:e.visible,"on-confirm":()=>V(),"on-close":()=>e.visible=!1},{default:a(()=>[t(x,{layout:"inline",ref_key:"form",ref:_,rules:{stedent:[{required:!0,message:"姓名不能为空"}],classs:[{required:!0,message:"班级不能为空"}],date:[{required:!0,message:"考勤日期不能为空"}],status:[{required:!0,message:"状态不能为空"}],details:[{required:!0,message:"详情不能为空"}]},data:e.pojo,colon:!0},{default:a(()=>[t(m,{style:{width:"96%",margin:"8px 0"},label:"学员姓名",name:"stedent"},{default:a(()=>[t(r,{modelValue:e.pojo.stedent,"onUpdate:modelValue":o[0]||(o[0]=l=>e.pojo.stedent=l),placeholder:"请输入学员姓名"},null,8,["modelValue"])]),_:1}),t(m,{style:{width:"96%",margin:"8px 0"},label:"班级",name:"classs"},{default:a(()=>[t(r,{modelValue:e.pojo.classs,"onUpdate:modelValue":o[1]||(o[1]=l=>e.pojo.classs=l),placeholder:"请输入班级"},null,8,["modelValue"])]),_:1}),t(m,{style:{width:"96%",margin:"8px 0"},label:"考勤日期",name:"date"},{default:a(()=>[t(j,{modelValue:e.pojo.date,"onUpdate:modelValue":o[2]||(o[2]=l=>e.pojo.date=l),"enable-time-picker":"","allow-input":"",clearable:""},null,8,["modelValue"])]),_:1}),t(m,{style:{width:"96%",margin:"8px 0"},label:"状态",name:"status"},{default:a(()=>[t(r,{modelValue:e.pojo.status,"onUpdate:modelValue":o[3]||(o[3]=l=>e.pojo.status=l),placeholder:"请输入考勤状态"},null,8,["modelValue"])]),_:1}),t(m,{style:{width:"96%",margin:"8px 0"},label:"详情",name:"details"},{default:a(()=>[t(r,{modelValue:e.pojo.details,"onUpdate:modelValue":o[4]||(o[4]=l=>e.pojo.details=l),placeholder:"请输入详情"},null,8,["modelValue"])]),_:1})]),_:1},8,["data"])]),_:1},8,["header","visible","on-confirm","on-close"]),t($,{bordered:!1,hoverShadow:"",style:{width:"96%",margin:"0 auto","margin-top":"30px","min-height":"94vh"}},{default:a(()=>[b("div",null,[t(C,{size:6},{default:a(()=>[t(y,{size:"small",onClick:o[5]||(o[5]=l=>{e.visible=!0,e.isUpdate=!1,s.$refs.form.reset()}),theme:"primary"},{icon:a(()=>[t(c,{name:"add"})]),default:a(()=>[i(" 新建 ")]),_:1}),t(y,{size:"small",onClick:k,theme:"danger"},{icon:a(()=>[t(c,{name:"delete"})]),default:a(()=>[i(" 删除 ")]),_:1}),t(U,{variant:"light-outline",theme:"primary",shape:"round",size:"small"},{default:a(()=>[i(" 共有"+w(u.value.total)+"条记录 ",1)]),_:1})]),_:1}),b("div",T,[t(z,{totalContent:!1,onChange:d,modelValue:e.page,"onUpdate:modelValue":o[6]||(o[6]=l=>e.page=l),theme:"simple",showPageSize:!1,pageSize:8,size:"small",total:u.value.total},null,8,["modelValue","total"])]),t(r,{onInput:o[7]||(o[7]=l=>{e.page=1,d()}),modelValue:e.search,"onUpdate:modelValue":o[8]||(o[8]=l=>e.search=l),modelModifiers:{lazy:!0},size:"small",style:{width:"20%",float:"right"},placeholder:"输入内容",clearable:""},{suffixIcon:a(()=>[t(c,{style:{cursor:"pointer"},name:"search"})]),_:1},8,["modelValue"])]),t(D,{size:"small","row-key":"id","selected-row-keys":e.selectedRowKeys,"onUpdate:selectedRowKeys":o[9]||(o[9]=l=>e.selectedRowKeys=l),data:u.value.records,columns:[{colKey:"row-select",type:"multiple",width:60},{colKey:"id",title:"ID"},{colKey:"stedent",title:"学员姓名",ellipsis:!0},{colKey:"classs",title:"班级"},{colKey:"date",title:"考勤时间"},{colKey:"status",title:"状态"},{colKey:"details",title:"详情"},{title:"操作",colKey:"operation"}]},{date:a(({row:l})=>[i(w(Y(H)(l.date).format("YYYY-MM-DD HH:mm:ss")),1)]),operation:a(({row:l})=>[t(v,{onClick:R=>{e.visible=!0,e.isUpdate=!0,e.pojo={...l}},theme:"primary",hover:"color"},{default:a(()=>[i(" 修改 ")]),_:2},1032,["onClick"]),i("  "),t(B,{theme:"danger",confirmBtn:{theme:"danger"},onConfirm:R=>g(l.id),cancelBtn:{variant:"outline"},content:"确认删除吗"},{default:a(()=>[t(v,{theme:"danger",hover:"color"},{default:a(()=>[i(" 删除 ")]),_:1})]),_:2},1032,["onConfirm"])]),_:1},8,["selected-row-keys","data"])]),_:1})])}}},J=S(E,[["__scopeId","data-v-a2a98f9d"]]);export{J as default};
