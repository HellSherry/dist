import{_ as v}from"./ToHtml-a2ee5490.js";import{b as d,d as I,u as k,e as s,o as c,c as g,a as u,f as t,w as l,F as _,r as A,n as h,g as p,t as N,h as V,s as L}from"./index-1858008c.js";/* empty css                                               */const C={style:{width:"80%",margin:"30px 10%"}},O=["id"],D={key:0,id:"aimsgLast",style:{height:"100px"}},J={style:{height:"10vh",width:"100%","background-color":"var(--td-bg-color-page)",margin:"0 auto"}},B={style:{width:"80%",margin:"0 auto"}},z={style:{"text-align":"right","margin-top":"-33px"}},q={__name:"AIView",setup(E){const e=d([{msg:"你好！我是GPT，一个由OpenAI创建的人工智能语言模型。我可以回答你关于各种主题的问题，帮助你解决问题或者提供信息。有什么我可以帮助你的吗？",type:"AI",time:new Date().toLocaleString()}]);localStorage.getItem("messages")!=null&&(e.value=JSON.parse(localStorage.getItem("messages"))),I(()=>{localStorage.setItem("messages",JSON.stringify(e.value))});const a=d(),i=d(!1);k();function y(){i.value||(i.value=!0,e.value.push({msg:a.value,type:"Me",time:new Date().toLocaleString()}),L.get("/ai/qwen?ask="+a.value).then(async n=>{e.value.push({msg:JSON.parse(n.data).output.text,type:"AI",time:new Date().toLocaleString()}),console.log(n),localStorage.setItem("messages",JSON.stringify(e.value))}).catch(()=>{e.value.push({msg:"我不会回答你，我太弱了",type:"AI",time:new Date().toLocaleString()}),localStorage.setItem("messages",JSON.stringify(e.value))}).finally(()=>{a.value="",document.getElementById("aimsgLast").scrollIntoView({behavior:"smooth",block:"end"}),i.value=!1}))}return(n,r)=>{const m=s("t-avatar"),f=s("t-space"),b=s("t-textarea"),x=s("t-button"),w=s("nut-sticky");return c(),g(_,null,[u("div",C,[t(f,{style:{width:"100%","min-height":"80vh"},direction:"vertical"},{default:l(()=>[(c(!0),g(_,null,A(e.value,(o,S)=>(c(),g("div",{id:"aimsg"+S},[t(m,{style:h(o.type=="AI"?"":"float: right"),onClick:r[0]||(r[0]=F=>n.visible=!n.visible)},{default:l(()=>[p(N(o.type),1)]),_:2},1032,["style"]),t(v,{style:h("vertical-align: top;max-width: 80%;margin-top: 2px;display: inline-block;margin-left:6px;margin-right:6px;padding: 10px;border-radius: 8px;background-color: var(--td-bg-color-container); width:fit-content;"+(o.type=="AI"?"":"float: right;")),value:o.msg.replace(/\n\n```/g,"<pre>").replace(/```\n\n/g,"</pre>").replace(/\n/g,"<br>")},null,8,["style","value"])],8,O))),256)),i.value?(c(),g("div",D,[t(m,null,{default:l(()=>[p("AI")]),_:1}),t(v,{style:{"vertical-align":"top","max-width":"80%","margin-top":"2px",display:"inline-block","margin-left":"6px","margin-right":"6px",padding:"10px","border-radius":"8px","background-color":"var(--td-bg-color-container)",width:"fit-content"},value:"正在加载..."})])):V("",!0)]),_:1})]),t(w,{style:{width:"100%","margin-top":"20px"},bottom:"0",position:"bottom"},{default:l(()=>[u("div",J,[u("div",B,[t(b,{modelValue:a.value,"onUpdate:modelValue":r[1]||(r[1]=o=>a.value=o),placeholder:"请输入内容",autofocus:"",autosize:""},null,8,["modelValue"]),u("div",z,[t(x,{onClick:y,disabled:a.value==""},{default:l(()=>[p("确定")]),_:1},8,["disabled"])])])])]),_:1})],64)}}};export{q as default};
