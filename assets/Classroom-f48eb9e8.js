import{_ as q,u as M,b as w,H as N,e as n,o as g,c as k,f as t,w as a,s as p,M as d,F as P,r as L,i as T,a as C,g as i,t as A,G as E}from"./index-1858008c.js";const G={style:{position:"relative",height:"102vh"}},H={style:{display:"inline-block",float:"right",width:"200px","margin-left":"10px"}},J={__name:"Classroom",setup(O){M();const h=w(),c=w({records:[{id:1,title:"这是一条通知",details:"这是通知详情",addtime:"2024-01-10T11:15:42.000+00:00"}],total:1,size:10,current:1,pages:1}),e=N({isUpdate:!1,selectedRowKeys:[],visible:!1,page:1,search:"",options:"",classs:[],pojo:{id:"",name:"",num:"",teacher:"",classs:""},options1:[{label:"架构云",value:"1",title:"架构云选项"},{label:"大数据",value:"2"},{label:"区块链",value:"3"},{label:"物联网",value:"4",disabled:!0},{label:"人工智能",value:"5"}]});function U(){p.get(`/classInfo/selectLimit?page=${e.page}&search=${e.search}`).then(s=>{e.classs=s.data.list,console.log(s)})}U();function r(){p.get(`/classroom/selectAll?page=${e.page}&size=8&names=${e.search}`).then(s=>{c.value=s.data,console.log(s)})}r();async function j(){typeof await h.value.validate()=="boolean"&&(e.isUpdate==!1&&(e.pojo.id=0),p.post(`/classroom/${e.isUpdate?"update":"insert"}`,e.pojo).then(s=>{console.log(11121),console.log(s),r(),s.data>0?d.success((e.isUpdate?"修改":"新增")+"成功"):d.error((e.isUpdate?"修改":"新增")+"失败"),e.visible=!1}))}function K(){if(e.selectedRowKeys.length>0){const s=E({header:"提示",body:"您确认删除所选 "+e.selectedRowKeys.length+" 项数据吗？",confirmBtn:{content:"删除",theme:"danger"},cancelBtn:{content:"取消",variant:"outline"},onConfirm:({e:o})=>{v(e.selectedRowKeys),s.hide()}})}else d.error("请选择要删除的项")}function v(s){p.post("/classroom/deletes?ids="+s.toString()).then(o=>{console.log(o),r(),o.data>0?d.success("删除成功"):d.error("删除失败")})}return(s,o)=>{const m=n("t-input"),u=n("t-form-item"),x=n("t-option"),B=n("t-select"),y=n("t-space"),z=n("t-form"),$=n("t-dialog"),f=n("t-icon"),b=n("t-button"),R=n("t-tag"),D=n("t-pagination"),V=n("t-link"),I=n("t-popconfirm"),S=n("t-table"),F=n("t-card");return g(),k("div",G,[t($,{placement:"center",header:e.isUpdate?"编辑教室信息":"新增教室",visible:e.visible,"on-confirm":()=>j(),"on-close":()=>e.visible=!1},{default:a(()=>[t(z,{layout:"inline",ref_key:"form",ref:h,rules:{name:[{required:!0,message:"名称不能为空"}],num:[{required:!0,message:"数量不能为空"}],teacher:[{required:!0,message:"老师不能为空"}],classs:[{required:!0,message:"班级不能为空"}]},data:e.pojo,colon:!0},{default:a(()=>[t(u,{style:{width:"96%",margin:"8px 0"},label:"名称",name:"name"},{default:a(()=>[t(m,{modelValue:e.pojo.name,"onUpdate:modelValue":o[0]||(o[0]=l=>e.pojo.name=l),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),t(u,{style:{width:"96%",margin:"8px 0"},label:"人数",name:"num"},{default:a(()=>[t(m,{modelValue:e.pojo.num,"onUpdate:modelValue":o[1]||(o[1]=l=>e.pojo.num=l),placeholder:"请输入人数"},null,8,["modelValue"])]),_:1}),t(u,{style:{width:"96%",margin:"8px 0"},label:"老师",name:"teacher"},{default:a(()=>[t(m,{modelValue:e.pojo.teacher,"onUpdate:modelValue":o[2]||(o[2]=l=>e.pojo.teacher=l),placeholder:"请输入老师"},null,8,["modelValue"])]),_:1}),t(u,{style:{width:"96%",margin:"8px 0"},label:"管理的班级",name:"classs"},{default:a(()=>[t(y,{style:{width:"100%"}},{default:a(()=>[t(B,{modelValue:e.pojo.classs,"onUpdate:modelValue":o[4]||(o[4]=l=>e.pojo.classs=l),placeholder:"请选择管理的班级",clearable:"",onFocus:s.onFocus,onBlur:s.onBlur},{default:a(()=>[(g(!0),k(P,null,L(e.classs,l=>(g(),T(x,{key:l.id,value:l.name,label:l.name,modelValue:e.pojo.classs,"onUpdate:modelValue":o[3]||(o[3]=_=>e.pojo.classs=_)},null,8,["value","label","modelValue"]))),128))]),_:1},8,["modelValue","onFocus","onBlur"])]),_:1})]),_:1})]),_:1},8,["data"])]),_:1},8,["header","visible","on-confirm","on-close"]),t(F,{bordered:!1,hoverShadow:"",style:{width:"96%",margin:"0 auto","margin-top":"30px","min-height":"94vh"}},{default:a(()=>[C("div",null,[t(y,{size:6},{default:a(()=>[t(b,{size:"small",onClick:o[5]||(o[5]=l=>{e.visible=!0,e.isUpdate=!1,s.$refs.form.reset()}),theme:"primary"},{icon:a(()=>[t(f,{name:"add"})]),default:a(()=>[i(" 新建 ")]),_:1}),t(b,{size:"small",onClick:K,theme:"danger"},{icon:a(()=>[t(f,{name:"delete"})]),default:a(()=>[i(" 删除 ")]),_:1}),t(R,{variant:"light-outline",theme:"primary",shape:"round",size:"small"},{default:a(()=>[i(" 共有"+A(c.value.total)+"条记录 ",1)]),_:1})]),_:1}),C("div",H,[t(D,{totalContent:!1,onChange:r,modelValue:e.page,"onUpdate:modelValue":o[6]||(o[6]=l=>e.page=l),theme:"simple",showPageSize:!1,size:"small",total:c.value.total},null,8,["modelValue","total"])]),t(m,{onInput:o[7]||(o[7]=l=>{e.page=1,r()}),modelValue:e.search,"onUpdate:modelValue":o[8]||(o[8]=l=>e.search=l),modelModifiers:{lazy:!0},size:"small",style:{width:"20%",float:"right"},placeholder:"输入内容",clearable:""},{suffixIcon:a(()=>[t(f,{style:{cursor:"pointer"},name:"search"})]),_:1},8,["modelValue"])]),t(S,{size:"small","row-key":"id","selected-row-keys":e.selectedRowKeys,"onUpdate:selectedRowKeys":o[9]||(o[9]=l=>e.selectedRowKeys=l),data:c.value.list,columns:[{colKey:"row-select",type:"multiple",width:60},{colKey:"id",title:"ID"},{colKey:"name",title:"名称",ellipsis:!0},{colKey:"num",title:"人数"},{colKey:"teacher",title:"老师"},{colKey:"classs",title:"管理的班级"},{title:"操作",colKey:"operation"}]},{operation:a(({row:l})=>[t(V,{onClick:_=>{e.visible=!0,e.isUpdate=!0,e.pojo={...l}},theme:"primary",hover:"color"},{default:a(()=>[i(" 修改 ")]),_:2},1032,["onClick"]),i("  "),t(I,{theme:"danger",confirmBtn:{theme:"danger"},onConfirm:_=>v(l.id),cancelBtn:{variant:"outline"},content:"确认删除吗"},{default:a(()=>[t(V,{theme:"danger",hover:"color"},{default:a(()=>[i(" 删除 ")]),_:1})]),_:2},1032,["onConfirm"])]),_:1},8,["selected-row-keys","data"])]),_:1})])}}},W=q(J,[["__scopeId","data-v-6f9f8c8b"]]);export{W as default};
