import{_ as q,u as P,b as V,H as N,e as s,o as g,c as T,f as t,w as a,a as f,n as Y,k as L,s as _,M as m,i as k,g as r,t as j,G}from"./index-1858008c.js";const H={style:{position:"relative",height:"102vh"}},O={style:{display:"inline-block",float:"right",width:"200px","margin-left":"10px"}},W={__name:"AdministratorMsgView",setup(F){const x=P(),h=V(),p=V({records:[{id:1,title:"这是一条通知",details:"这是通知详情",addtime:"2024-01-10T11:15:42.000+00:00"}],total:1,size:10,current:1,pages:1}),e=N({isUpdate:!1,selectedRowKeys:[],visible:!1,page:1,search:"",pojo:{userEmail:"",username:"",password:"$2a$10$YENaMAtoqC7WcVh0SAjcPOSM8kzCeklbYAYS3gDGHw/kzPDL9jRM6",grade:null,userImg:"no",defaultAddress:null,identity:3}});function i(){_.get(`/user/selectLimit?page=${e.page}&identity=3&search=${e.search}`).then(n=>{p.value=n.data,console.log(n)})}i();async function U(){typeof await h.value.validate()=="boolean"&&_.post(`/user/${e.isUpdate?"update":"insert"}`,e.pojo).then(n=>{console.log(11121),console.log(n),i(),n.data>0?m.success((e.isUpdate?"修改":"新增")+"成功"):m.error((e.isUpdate?"修改":"新增")+"失败"),e.visible=!1})}function C(){if(e.selectedRowKeys.length>0){const n=G({header:"提示",body:"您确认删除所选 "+e.selectedRowKeys.length+" 项数据吗？",confirmBtn:{content:"删除",theme:"danger"},cancelBtn:{content:"取消",variant:"outline"},onConfirm:({e:o})=>{y(e.selectedRowKeys),n.hide()}})}else m.error("请选择要删除的项")}function y(n){_.post("/user/deletes?ids="+n.toString()).then(o=>{console.log(o),i(),o.data>0?m.success("删除成功"):m.error("删除失败")})}return(n,o)=>{const d=s("t-input"),u=s("t-form-item"),z=s("t-alert"),v=s("t-radio"),K=s("t-radio-group"),$=s("t-form"),M=s("t-dialog"),c=s("t-icon"),b=s("t-button"),A=s("t-tag"),S=s("t-space"),B=s("t-pagination"),w=s("t-link"),E=s("t-popconfirm"),I=s("t-table"),D=s("t-card");return g(),T("div",H,[t(M,{placement:"center",header:e.isUpdate?"编辑管理员信息":"新增管理员",visible:e.visible,"on-confirm":()=>U(),"on-close":()=>e.visible=!1},{default:a(()=>[t($,{layout:"inline",ref_key:"form",ref:h,rules:{userEmail:[{required:!0,message:"邮箱不能为空"}],username:[{required:!0,message:"用户名不能为空"}],password:[{required:!0,message:"密码不能为空"}],grade:[{required:!0,message:"性别不能为空"}],defaultAddress:[{required:!0,message:"地址不能为空"}]},data:e.pojo,colon:!0},{default:a(()=>[t(u,{style:{width:"96%",margin:"8px 0"},label:"邮箱",name:"userEmail"},{default:a(()=>[t(d,{modelValue:e.pojo.userEmail,"onUpdate:modelValue":o[0]||(o[0]=l=>e.pojo.userEmail=l),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),t(u,{style:{width:"96%",margin:"8px 0"},label:"用户名",name:"username"},{default:a(()=>[t(d,{modelValue:e.pojo.username,"onUpdate:modelValue":o[1]||(o[1]=l=>e.pojo.username=l),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),t(u,{style:{width:"96%",margin:"8px 0"},label:"密码",name:"password"},{default:a(()=>[e.isUpdate?(g(),k(z,{key:1,STYLE:"width: 100%;height: 40px;padding-top: 10px",theme:"warning",message:"你没有权限修改密码"})):(g(),k(d,{key:0,modelValue:e.pojo.password,"onUpdate:modelValue":o[2]||(o[2]=l=>e.pojo.password=l),placeholder:"请输入密码"},null,8,["modelValue"]))]),_:1}),t(u,{style:{width:"96%",margin:"8px 0"},label:"性别",name:"grade"},{default:a(()=>[t(K,{modelValue:e.pojo.grade,"onUpdate:modelValue":o[3]||(o[3]=l=>e.pojo.grade=l)},{default:a(()=>[t(v,{value:0},{default:a(()=>[r("男")]),_:1}),t(v,{value:1},{default:a(()=>[r("女")]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(u,{style:{width:"96%",margin:"8px 0"},label:"地址",name:"defaultAddress"},{default:a(()=>[t(d,{modelValue:e.pojo.defaultAddress,"onUpdate:modelValue":o[4]||(o[4]=l=>e.pojo.defaultAddress=l),placeholder:"请输入地址"},null,8,["modelValue"])]),_:1})]),_:1},8,["data"])]),_:1},8,["header","visible","on-confirm","on-close"]),f("div",{style:Y([{"background-position":"center"},`background-image: url('${L(x).darkT?`//pic.sherry.games/assets/image/mobileback/th (${Math.round(Math.random()*30)}).jpg`:`//pic.sherry.games/assets/image/mobileback/th (${Math.round(Math.random()*30)}).jpg`}');background-repeat: no-repeat;background-size: cover;min-height: 46vh ;margin-top: -20px`])},null,4),t(D,{bordered:!1,hoverShadow:"",style:{width:"96%",margin:"0 auto","margin-top":"-30px","min-height":"58vh"}},{default:a(()=>[f("div",null,[t(S,{size:6},{default:a(()=>[t(b,{size:"small",onClick:o[5]||(o[5]=l=>{e.visible=!0,e.isUpdate=!1,n.$refs.form.reset()}),theme:"primary"},{icon:a(()=>[t(c,{name:"add"})]),default:a(()=>[r(" 新建 ")]),_:1}),t(b,{size:"small",onClick:C,theme:"danger"},{icon:a(()=>[t(c,{name:"delete"})]),default:a(()=>[r(" 删除 ")]),_:1}),t(A,{variant:"light-outline",theme:"primary",shape:"round",size:"small"},{default:a(()=>[r(" 共有"+j(p.value.total)+"条记录 ",1)]),_:1})]),_:1}),f("div",O,[t(B,{totalContent:!1,onChange:i,modelValue:e.page,"onUpdate:modelValue":o[6]||(o[6]=l=>e.page=l),theme:"simple",showPageSize:!1,size:"small",total:p.value.total},null,8,["modelValue","total"])]),t(d,{onInput:o[7]||(o[7]=l=>{e.page=1,i()}),modelValue:e.search,"onUpdate:modelValue":o[8]||(o[8]=l=>e.search=l),modelModifiers:{lazy:!0},size:"small",style:{width:"20%",float:"right"},placeholder:"输入内容",clearable:""},{suffixIcon:a(()=>[t(c,{style:{cursor:"pointer"},name:"search"})]),_:1},8,["modelValue"])]),t(I,{size:"small","row-key":"userId","selected-row-keys":e.selectedRowKeys,"onUpdate:selectedRowKeys":o[9]||(o[9]=l=>e.selectedRowKeys=l),data:p.value.list,columns:[{colKey:"row-select",type:"multiple",width:60},{colKey:"userId",title:"ID"},{colKey:"userEmail",title:"邮箱",ellipsis:!0},{colKey:"username",title:"用户名"},{colKey:"grade",title:"性别"},{colKey:"defaultAddress",title:"地址"},{title:"操作",colKey:"operation"}]},{grade:a(({row:l})=>[r(j(l.grade==0?"男":"女"),1)]),operation:a(({row:l})=>[t(w,{onClick:R=>{e.visible=!0,e.isUpdate=!0,e.pojo={...l}},theme:"primary",hover:"color"},{default:a(()=>[r(" 修改 ")]),_:2},1032,["onClick"]),r("  "),t(E,{theme:"danger",confirmBtn:{theme:"danger"},onConfirm:R=>y(l.userId),cancelBtn:{variant:"outline"},content:"确认删除吗"},{default:a(()=>[t(w,{theme:"danger",hover:"color"},{default:a(()=>[r(" 删除 ")]),_:1})]),_:2},1032,["onConfirm"])]),_:1},8,["selected-row-keys","data"])]),_:1})])}}},Q=q(W,[["__scopeId","data-v-0d5fdb7c"]]);export{Q as default};
