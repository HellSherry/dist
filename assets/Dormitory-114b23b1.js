import{_ as I,u as q,b,H as M,e as n,o as N,c as P,f as t,w as l,s as _,M as d,g as i,a as w,t as V,G as T}from"./index-1858008c.js";const A={style:{position:"relative",height:"102vh"}},E={style:{display:"inline-block",float:"right",width:"200px","margin-left":"10px"}},G={__name:"Dormitory",setup(H){q();const f=b(),m=b({records:[{id:1,title:"这是一条通知",details:"这是通知详情",addtime:"2024-01-10T11:15:42.000+00:00"}],total:1,size:10,current:1,pages:1}),e=M({isUpdate:!1,selectedRowKeys:[],visible:!1,page:1,search:"",pojo:{id:0,name:"",num:"",max:"",gender:null}});function r(){_.get(`/dormitory/selectAll?page=${e.page}&size=8&names=${e.search}`).then(s=>{m.value=s.data,console.log(s)})}r();async function x(){typeof await f.value.validate()=="boolean"&&(e.isUpdate==!1&&(e.pojo.id=0),_.post(`/dormitory/${e.isUpdate?"update":"insert"}`,e.pojo).then(s=>{console.log(11121),console.log(s),r(),s.data>0?d.success((e.isUpdate?"修改":"新增")+"成功"):d.error((e.isUpdate?"修改":"新增")+"失败"),e.visible=!1}))}function U(){if(e.selectedRowKeys.length>0){const s=T({header:"提示",body:"您确认删除所选 "+e.selectedRowKeys.length+" 项数据吗？",confirmBtn:{content:"删除",theme:"danger"},cancelBtn:{content:"取消",variant:"outline"},onConfirm:({e:o})=>{g(e.selectedRowKeys),s.hide()}})}else d.error("请选择要删除的项")}function g(s){_.post("/dormitory/deletes?ids="+s.toString()).then(o=>{console.log(o),r(),o.data>0?d.success("删除成功"):d.error("删除失败")})}return(s,o)=>{const u=n("t-input"),p=n("t-form-item"),y=n("t-radio"),k=n("t-radio-group"),K=n("t-form"),j=n("t-dialog"),c=n("t-icon"),v=n("t-button"),C=n("t-tag"),z=n("t-space"),D=n("t-pagination"),h=n("t-link"),B=n("t-popconfirm"),$=n("t-table"),R=n("t-card");return N(),P("div",A,[t(j,{placement:"center",header:e.isUpdate?"编辑宿舍信息":"新增宿舍",visible:e.visible,"on-confirm":()=>x(),"on-close":()=>e.visible=!1},{default:l(()=>[t(K,{layout:"inline",ref_key:"form",ref:f,rules:{name:[{required:!0,message:"名称不能为空"}],num:[{required:!0,message:"人数不能为空"}],max:[{required:!0,message:"可容纳人数不能为空"}],gender:[{required:!0,message:"性别不能为空"}]},data:e.pojo,colon:!0},{default:l(()=>[t(p,{style:{width:"96%",margin:"8px 0"},label:"姓名",name:"name"},{default:l(()=>[t(u,{modelValue:e.pojo.name,"onUpdate:modelValue":o[0]||(o[0]=a=>e.pojo.name=a),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),t(p,{style:{width:"96%",margin:"8px 0"},label:"性别",name:"gender"},{default:l(()=>[t(k,{modelValue:e.pojo.gender,"onUpdate:modelValue":o[1]||(o[1]=a=>e.pojo.gender=a)},{default:l(()=>[t(y,{value:0},{default:l(()=>[i("男")]),_:1}),t(y,{value:1},{default:l(()=>[i("女")]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(p,{style:{width:"96%",margin:"8px 0"},label:"人数",name:"num"},{default:l(()=>[t(u,{modelValue:e.pojo.num,"onUpdate:modelValue":o[2]||(o[2]=a=>e.pojo.num=a),placeholder:"请输入人数"},null,8,["modelValue"])]),_:1}),t(p,{style:{width:"96%",margin:"8px 0"},label:"可容纳人数",name:"max"},{default:l(()=>[t(u,{modelValue:e.pojo.max,"onUpdate:modelValue":o[3]||(o[3]=a=>e.pojo.max=a),placeholder:"请输入可容纳人数"},null,8,["modelValue"])]),_:1})]),_:1},8,["data"])]),_:1},8,["header","visible","on-confirm","on-close"]),t(R,{bordered:!1,hoverShadow:"",style:{width:"96%",margin:"0 auto","margin-top":"30px","min-height":"94vh"}},{default:l(()=>[w("div",null,[t(z,{size:6},{default:l(()=>[t(v,{size:"small",onClick:o[4]||(o[4]=a=>{e.visible=!0,e.isUpdate=!1,s.$refs.form.reset()}),theme:"primary"},{icon:l(()=>[t(c,{name:"add"})]),default:l(()=>[i(" 新建 ")]),_:1}),t(v,{size:"small",onClick:U,theme:"danger"},{icon:l(()=>[t(c,{name:"delete"})]),default:l(()=>[i(" 删除 ")]),_:1}),t(C,{variant:"light-outline",theme:"primary",shape:"round",size:"small"},{default:l(()=>[i(" 共有"+V(m.value.total)+"条记录 ",1)]),_:1})]),_:1}),w("div",E,[t(D,{totalContent:!1,onChange:r,modelValue:e.page,"onUpdate:modelValue":o[5]||(o[5]=a=>e.page=a),theme:"simple",showPageSize:!1,size:"small",total:m.value.total},null,8,["modelValue","total"])]),t(u,{onInput:o[6]||(o[6]=a=>{e.page=1,r()}),modelValue:e.search,"onUpdate:modelValue":o[7]||(o[7]=a=>e.search=a),modelModifiers:{lazy:!0},size:"small",style:{width:"20%",float:"right"},placeholder:"输入内容",clearable:""},{suffixIcon:l(()=>[t(c,{style:{cursor:"pointer"},name:"search"})]),_:1},8,["modelValue"])]),t($,{size:"small","row-key":"id","selected-row-keys":e.selectedRowKeys,"onUpdate:selectedRowKeys":o[8]||(o[8]=a=>e.selectedRowKeys=a),data:m.value.list,columns:[{colKey:"row-select",type:"multiple",width:60},{colKey:"id",title:"ID"},{colKey:"name",title:"名称"},{colKey:"gender",title:"性别"},{colKey:"num",title:"人数"},{colKey:"max",title:"可容纳人数"},{title:"操作",colKey:"operation"}]},{gender:l(({row:a})=>[i(V(a.gender==0?"男":"女"),1)]),operation:l(({row:a})=>[t(h,{onClick:S=>{e.visible=!0,e.isUpdate=!0,e.pojo={...a}},theme:"primary",hover:"color"},{default:l(()=>[i(" 修改 ")]),_:2},1032,["onClick"]),i("  "),t(B,{theme:"danger",confirmBtn:{theme:"danger"},onConfirm:S=>g(a.id),cancelBtn:{variant:"outline"},content:"确认删除吗"},{default:l(()=>[t(h,{theme:"danger",hover:"color"},{default:l(()=>[i(" 删除 ")]),_:1})]),_:2},1032,["onConfirm"])]),_:1},8,["selected-row-keys","data"])]),_:1})])}}},J=I(G,[["__scopeId","data-v-7c8726da"]]);export{J as default};
